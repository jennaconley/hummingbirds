<!DOCTYPE html>
<html>
<head>
  <title>Hummingbird Quest</title>

  <!-- Leaflet Stylesheet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>

  <!-- Leaflet JavaScript file, which must be placed after Leaflet's CSS Stylesheet -->
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin="">
  </script>

  <!-- Load project-specific stylesheet -->
  <link rel="stylesheet" type="text/css" href="/static/styles.css">
</head>

<div>
  <p><h3>{{ bird_object.common_name }} Sightings</h3></p>
  <p><h3>{{ bird_object.genus }} {{ bird_object.species }}</h3></p>
  <br>
  <br>
        
  <div id="mapid">

    <script type="text/javascript">
          
      var mymap = L.map('mapid').setView([ {{ clat }}, {{ -clong }} ], 4 ) ;

      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
      maxZoom: 18,
      id: 'mapbox/streets-v11',
      tileSize: 512,
      zoomOffset: -1,
      accessToken: 'pk.eyJ1IjoiamVubmFjb25sZXkiLCJhIjoiY2s4N3RreXYzMDFsMzNrczQzb3BwMGdidiJ9.GjA283FLvntXD2Rgd1K4og'
      }).addTo(mymap);

      {% for current_dict in list_of_dicts %}

        var circle = L.circle([ {{current_dict['latitude'] }}, {{ current_dict['longitude'] }} ], {
        color: 'purple',
        fillColor: '#f03',
        fillOpacity: 0.5,
        radius: {{ 200 * current_dict['this_species'] }}
        }).addTo(mymap);

      {% endfor %}

    </script>
       
  </div>

